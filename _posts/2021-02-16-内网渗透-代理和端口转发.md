---
title: 内网渗透-代理和端口转发
published: true
--- 
&nbsp;

## 0x00 前言
----
常处在企业内网，今天就来整理一下内网渗透中不得不提到的端口转发和代理。这些是内网渗透的基础，文本主要针对场景和工具使用归纳说明  

为什么强调场景呢？因为这个涉及到网络。  

*我们先认识以下三则文：*  
1. 网络场景，分成内网和外网。外网通常指得是公网（Internet），只要网络可达，就能访问和登录，通常是固定IP或域名。例如通过浏览器访问百度域名。  
2. 内网IP一般相对互联网是独立的局域网，就比如是小区的门牌号，对于一个小区的住户号码是唯一的，但是对于不同小区可能号码又是相同的。这种‘独立’的环境下相互之间不能直接访问。  
3. 代理和转发的本质应该是相同的，他们都要经过中间转一手，可以自己转给自己一手，也可以转给他人然后再转。当然这些差别主要是体现在需求和效果方面。代理主要解决的是多端口同时转手问题，一次规则便能搞定。代理实现的功能一般包含了端口转发。例如EW工具，根据场景需要，你可以把它部署成代理，也可以部署成端口转发。  

好了，以上主要是想把它们之间的意思笼统的贯彻一下大脑。下面我们来熟悉一下工具和应用手法  


## 0x01 实验环境
----
此类基础工具较多，本文主要研究的内容如下：  
```js
A、B网，模拟正向和反向链接场景

攻击机、受害者(win && linux)

netsh

ssh

lcx、portmap

nc

chisel

ew

proxifier

proxychains

```
## 0x02 简介
----
本文按照以下几块内容说明  

* 端口转发工具  

* 正向连接端口转发  

* 反向连接端口转发  

* 适用的场景  

* 代理服务器端和客户端工具  

* 反向代理应用场景  

## 0x03 端口转发工具
----



## 0x04 正向连接端口转发
----



## 0x05 反向连接端口转发
----


## 0x06 适用的场景
----
*


## 0x07 代理服务器端和客户端工具
----

 


## 0x08 反向代理应用场景
----


## 0x09 小结
----


----
### [Reference]
* [1] https://thekingofduck.github.io/post/ADStudy-Part-3-Attack-NTLM/   
* [2] https://eviladan0s.github.io/2020/04/25/about-ntlm/  
* [3] https://3gstudent.github.io/3gstudent.github.io/  
